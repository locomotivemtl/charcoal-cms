{{!--

    Relation Selectize Property Input
    =================================

--}}

{{# inputGroup }}
    <div class="input-group input-group-lg">
{{/ inputGroup }}

{{# isObject }}
    {{> charcoal/admin/property/control/select }}
{{/ isObject }}
{{^ isObject }}
        <input
            type="text"
            id="{{ inputId }}"
            name="{{ inputName }}"
            class="form-control {{ inputClass }}"
            value="{{ inputVal }}"
            {{# placeholder }}placeholder="{{ . }}"{{/ placeholder }}
            {{# readOnly }}readonly{{/ readOnly }}
            {{# required }}required{{/ required }}
            {{# disabled }}disabled{{/ disabled }}
        >
{{/ isObject }}

{{# inputGroup }}
    <span class="input-group-btn">
    {{# allowUpdate }}
        <button id="{{ inputId }}_update" class="btn btn-info" type="button"
                data-update-target="#{{ inputId }}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="btn-label sr-only">{{# _t }}Update selected item{{/ _t }}</span>
        </button>
    {{/ allowUpdate }}
    </span>
    </div>
{{/ inputGroup }}

{{# addJs }}
    <script>
        Charcoal.Admin.manager().add_property_input({
            id  : '{{ inputId }}',
            type: 'charcoal/admin/property/input/selectize',
            data: {
                title              : '{{ label }}',
                pattern            : '{{ pattern }}',
                obj_type           : '{{ targetObjectType }}',
                form_ident         : {{& formIdentAsJson}},
                selectize_selector : '#{{ inputId }}',
                selectize_options  : {{& selectizeOptionsAsJson }},
                choice_obj_map     : {{& choiceObjMapAsJson }}
            }
        });
    </script>
{{/ addJs }}
